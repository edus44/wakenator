<html>

<head>
    <!-- Angular Material style sheet -->
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/angular_material/1.0.0/angular-material.min.css">
</head>

<body ng-app="optionsApp" ng-controller="MainCtrl" ng-cloak>
    <div layout="column">
        <md-content class="md-block">
            <md-checkbox ng-model="opts.startup">
                Load at startup
            </md-checkbox>

            <md-input-container class="md-block">
              <label>Name</label>
              <input ng-model="opts.name">
            </md-input-container>

            <md-input-container class="md-block">
              <label>Server</label>
              <input ng-model="opts.server">
            </md-input-container>

        </md-content>
    </div>

    <!-- Angular Material requires Angular.js Libraries -->
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-animate.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-aria.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-messages.min.js"></script>
    <!-- Angular Material Library -->
    <script src="http://ajax.googleapis.com/ajax/libs/angular_material/1.0.0/angular-material.min.js"></script>

    <script>
    'use strict';

	var ipc = require('electron').ipcRenderer;
    var remote = require('remote');

    var options = remote.require('./lib/options');

    var win = remote.getCurrentWindow();

    angular.module('optionsApp', ['ngMaterial'])
        .controller('MainCtrl', function($scope) {
            win.show()

            $scope.opts = angular.extend({},options.data);

            $scope.$watchGroup(['opts.startup','opts.name','opts.server'],function(){
            	console.log($scope.opts);
            	ipc.send('options-changed',$scope.opts)
            })
        })
    </script>
</body>

</html>
